services:
  mongodb:
    build: ./MongoDb_Debian
    volumes:
      - ./MongoDb_Debian/data/db:/data/db
    hostname: mongodb
    ports:
      - "27017:27017"
    expose: 
      - 27017
    container_name: MongoDB
    networks: 
      - notes-network
  
  express:
    build: ./Notes_Express
    ports:
      - "3000:3000"
    environment: 
      - MONGOOSE_ADDRESS=mongodb://mongodb:27017/notes
      - PORT=3000
    hostname: express
    expose: 
      - 3000
    container_name: Express
    networks: 
      notes-network:
        aliases:
          - express
    depends_on:
      - "mongodb"
    
  react:
    build: ./Notes_React
    ports:
      - "5000:5000"
    environment:
      - REACT_APP_API_BASE_URL=http://express:3000
    container_name: React
    networks: 
      - notes-network
    depends_on:
      - "express"


networks:
  notes-network:
    driver: bridge